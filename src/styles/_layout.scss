// ===== LAYOUT & SECTIONS =====

@use 'variables' as *;

// Main container
.main-container {
    position: relative;
    width: 100%;
    height: 100vh;
}

// Sections container
.sections-container {
    width: 100%;
    height: 100vh;
    position: relative;
    will-change: transform;
}

// ===== DESKTOP: Horizontal Layout =====
@media (min-width: $breakpoint-desktop) {

    body.index-page,
    body.project-page {
        overflow: hidden;

        html {
            overflow: hidden;
        }
    }

    // Index page: 5 sections
    body.index-page .sections-container {
        display: flex;
        width: 500vw; // 5 sections × 100vw
        height: 100vh;
        transition: transform $transition-long;
        will-change: transform;
    }

    body.index-page .section {
        width: 100vw;
        height: 100vh;
        flex-shrink: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        padding: 0 80px 0 200px; // Left: Extra space for sidebar + margin
    }

    // Project page: 4 sections
    body.project-page .sections-container {
        display: flex;
        width: 400vw; // 4 sections × 100vw
        height: 100vh;
        transition: transform $transition-long;
        will-change: transform;
    }

    body.project-page .section {
        width: 100vw;
        height: 100vh;
        flex-shrink: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        padding: 0 80px 0 200px; // Same padding as index page
        overflow-y: auto; // Allow vertical scroll if content is too long
    }
}

// ===== MOBILE: Vertical Layout =====
@media (max-width: $breakpoint-tablet) {
    .sections-container {
        overflow-y: auto;
        height: auto;
        min-height: 100vh;
    }

    .section {
        min-height: 100vh; // Minimum full viewport height, can grow with content
        padding: 6rem 24px 2rem; // Top padding for topnav, 24px horizontal padding, bottom spacing
        display: flex;
        align-items: center; // Center content vertically
        scroll-margin-top: 80px; // Offset for fixed topnav when scrollIntoView is triggered
        scroll-snap-align: start; // Enable scroll snapping
    }

    // Override background-size for inicio section in mobile
    #inicio {
        background-size: cover !important;
    }
}

// Section performance
.section {
    will-change: transform;

    // Fade in animation
    >* {
        animation: fadeInUp 0.8s ease-out;
    }
}

// Animation
@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(30px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

// Responsive adjustments
@media (max-width: $breakpoint-large) {
    .section {
        padding: 0 100px;
    }
}

@media (max-width: $breakpoint-tablet) {
    .section {
        padding: 0 20px;
        min-height: auto;
        padding: 3rem 0;
    }
}

@media (max-width: $breakpoint-mobile) {
    .section {
        padding: 2rem 1.5rem;
        min-height: 100vh;
    }
}

// Background image support
.background-image {
    position: fixed;
    top: 0;
    left: 0;
    width: 50vw;
    height: 100vh;
    background-size: cover;
    background-position: left center;
    background-repeat: no-repeat;
    z-index: $z-background;
    opacity: 0.3;
}

.has-background-image {
    .section {
        padding-left: 50vw;
        padding-right: 120px;
    }

    .sidebar {
        left: calc(50vw + #{$sidebar-offset});
    }

    .nav-arrow-left {
        left: calc(50vw + #{$nav-arrow-left});
    }
}